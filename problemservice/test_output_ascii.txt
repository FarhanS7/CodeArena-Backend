[INFO] Scanning for projects...
[INFO] 
[INFO] --------------------< com.codearena:problemservice >--------------------
[INFO] Building com.codearena.problemservice 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ problemservice ---
[INFO] Copying 1 resource from src\main\resources to target\classes
[INFO] Copying 0 resource from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.14.1:compile (default-compile) @ problemservice ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ problemservice ---
[INFO] skip non existing resourceDirectory E:\Code_Arena\problemservice\src\test\resources
[INFO] 
[INFO] --- compiler:3.14.1:testCompile (default-testCompile) @ problemservice ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- surefire:3.5.4:test (default-test) @ problemservice ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.codearena.problemservice.integration.SecurityIntegrationTest
16:55:44.210 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.codearena.problemservice.integration.SecurityIntegrationTest]: SecurityIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
16:55:44.451 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.codearena.problemservice.ProblemserviceApplication for test class com.codearena.problemservice.integration.SecurityIntegrationTest
16:55:44.755 [main] INFO org.springframework.boot.devtools.restart.RestartApplicationListener -- Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-11-26T16:55:45.290+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] c.c.p.i.SecurityIntegrationTest          : Starting SecurityIntegrationTest using Java 25.0.1 with PID 18984 (started by ullah in E:\Code_Arena\problemservice)
2025-11-26T16:55:45.291+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] c.c.p.i.SecurityIntegrationTest          : No active profile set, falling back to 1 default profile: "default"
2025-11-26T16:55:48.025+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-26T16:55:48.163+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 82 ms. Found 2 JPA repository interfaces.
2025-11-26T16:55:49.353+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-26T16:55:49.454+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-11-26T16:55:49.517+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-26T16:55:50.109+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-26T16:55:50.159+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-26T16:55:50.506+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@764db16c
2025-11-26T16:55:50.509+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-26T16:55:50.564+06:00  WARN 18984 --- [com.codearena.problemservice] [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-26T16:55:50.596+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.14
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-26T16:55:52.307+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-26T16:55:52.415+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-26T16:55:53.243+06:00  WARN 18984 --- [com.codearena.problemservice] [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-26T16:55:53.302+06:00  WARN 18984 --- [com.codearena.problemservice] [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: e7bc4516-1720-4fbe-bd3f-23f6729b9c8f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-26T16:55:53.310+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-26T16:55:54.324+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoints beneath base path '/actuator'
2025-11-26T16:55:55.069+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-11-26T16:55:55.069+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-11-26T16:55:55.070+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-11-26T16:55:55.203+06:00  INFO 18984 --- [com.codearena.problemservice] [           main] c.c.p.i.SecurityIntegrationTest          : Started SecurityIntegrationTest in 10.467 seconds (process running for 12.634)
Hibernate: 
    select
        p1_0.id,
        p1_0.description,
        p1_0.difficulty,
        p1_0.example_input,
        p1_0.example_output,
        p1_0.title 
    from
        problems p1_0
Hibernate: 
    select
        tc1_0.problem_id,
        tc1_0.id,
        tc1_0.expected_output,
        tc1_0.input 
    from
        test_cases tc1_0 
    where
        tc1_0.problem_id=?

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /problems
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxMjMiLCJ1c2VybmFtZSI6ImFkbWluIiwicm9sZSI6IkFETUlOIiwiaWF0IjoxNzY0MTU0NTU2LCJleHAiOjE3NjQxNTU0NTZ9.Bo0GlTlhS7vUaLIVKc1QjfHm5HIeGiGx4Y_TWfkQaNw", Content-Length:"120"]
             Body = {"title":"Admin Problem","difficulty":"HARD","description":"Desc","exampleInput":"1","exampleOutput":"1","testCases":[]}
    Session Attrs = {}

Handler:
             Type = com.codearena.problemservice.controller.ProblemController
           Method = com.codearena.problemservice.controller.ProblemController#createProblem(ProblemRequest)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.bind.MethodArgumentNotValidException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 500
    Error message = null
          Headers = [Content-Type:"text/plain;charset=UTF-8", Content-Length:"20", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = text/plain;charset=UTF-8
             Body = Something went wrong
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
[ERROR] Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 12.64 s <<< FAILURE! -- in com.codearena.problemservice.integration.SecurityIntegrationTest
[ERROR] com.codearena.problemservice.integration.SecurityIntegrationTest.protectedEndpoint_ShouldReturn200_WhenAdminRole -- Time elapsed: 0.175 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<500>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:61)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:128)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:640)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.codearena.problemservice.integration.SecurityIntegrationTest.protectedEndpoint_ShouldReturn200_WhenAdminRole(SecurityIntegrationTest.java:107)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   SecurityIntegrationTest.protectedEndpoint_ShouldReturn200_WhenAdminRole:107 Status expected:<200> but was:<500>
[INFO] 
[ERROR] Tests run: 4, Failures: 1, Errors: 0, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  18.817 s
[INFO] Finished at: 2025-11-26T16:55:56+06:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.5.4:test (default-test) on project problemservice: There are test failures.
[ERROR] 
[ERROR] See E:\Code_Arena\problemservice\target\surefire-reports for the individual test results.
[ERROR] See dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
